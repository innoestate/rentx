@if(lodgers().length){
<div nz-dropdown [nzDropdownMenu]="manageLodgers" [nzPlacement]="'bottomCenter'">
  @if(estate().lodger){
  {{estate().lodger?.name}}
  }@else {
  <div nz-icon nzType="edit"></div>
  }
</div>

<nz-dropdown-menu #manageLodgers="nzDropdownMenu">
  <ul nz-menu nzSelectable>
    @if(estate().lodger){
    <li nz-menu-item>
      <div nz-dropdown [nzDropdownMenu]="manageRentReceipts" [nzPlacement]="'topLeft'" class="clickable">gérer les quittances</div>
    </li>
    }
    @if(lodgers().length){
    <li nz-menu-item>
      <td nz-dropdown [nzDropdownMenu]="menuLodgers" class="clickable">changer de locataire</td>
    </li>
    }@else {

    }
  </ul>
</nz-dropdown-menu>

<nz-dropdown-menu #manageRentReceipts="nzDropdownMenu">
  <ul nz-menu nzSelectable>
    <li nz-menu-item (click)="downloadRentReceipt()">télécharger</li>
    <li nz-menu-item (click)="senddRentReceipt()">envoyer</li>
  </ul>
</nz-dropdown-menu>

<nz-dropdown-menu #menuLodgers="nzDropdownMenu">
  <ul nz-menu nzSelectable>
    <ng-container *ngFor="let lodger of lodgers()">
      <li nz-menu-item>
        <div class="dropdown-line-content">
          <div style="flex: 1" (click)="setLodger(lodger)">{{lodger.name}}</div>
          <div class="delete" (click)="deleteLodger(lodger)" nz-icon nzType="delete"></div>
        </div>
      </li>
    </ng-container>

    @if(lodgers(); as lodgers){
    @if(lodgers.length){
    <li nz-menu-item (click)="createLodger()" class="primary">
      <button nz-button nzType="primary">ajouter un locataire</button>
    </li>
    }@else{
    <li nz-menu-item (click)="createLodger()" class="primary">ajouter un nouveau locataire</li>
    }
    }

  </ul>
</nz-dropdown-menu>
}@else{
<div class="empty-field create" (click)="createLodger()">+</div>
}
